<html>
<head>
<script src="prototype.js"></script>
<script src="scriptaculous.js?load=effects,dragdrop"></script>
<script src="bulletin.js"></script>
<script>
  Bulletin.lighthouse_domain = "<%= Lighthouse.domain_format % "" + (Lighthouse.port ? ":#{Lighthouse.port}" : "") %>"
  Bulletin.domain = "<%= $host %>"
  
  function moveItem(draggable,droparea){
     if (!droparea.cleared) {
        //droparea.innerHTML = '';
        droparea.cleared = true;
     }
     var performMove = function(){ 
       draggable.parentNode.removeChild(draggable)
       //drag and drop tries to do something stupid, so I undo that
       draggable.setAttribute("style","")
       droparea.appendChild(draggable)
      }
     new Ajax.Request(bulletin.requestURL(draggable.id, droparea.id), {method: 'get', onSuccess: performMove})     
  }
</script>
<style>
.ticket{
	width:40%;
	height:80px;
	border:1px solid #aaa;
	font-size:10px;
	font-family:Verdana;
	float:left;
	padding:5px;
	margin:5px;
}

.state{
	width:20%;
	float:left;
	height:100%;
}

h6 {
  margin:auto;
  text-align:center
}
</style>
</head>
<body>
<form id='setup' onsubmit="bulletin = new Bulletin(this.select('#account')[0].value, this.select('#project')[0].value, this.select('#token')[0].value); return false;">
  <input type='text' id='account' name='account' value="<%= params["account"] %>">.lighthouseapp.com/projects/
  <input type='text' id='project' name='project' value="<%= params["project"] %>"><br/>
  Token: <input type='text' id='token' name='token' value="<%= params["token"] %>"><br/>
  <input type='submit' value='create bulletin'/>
</form>
<div id='bulletin' style='margin:auto;display:none'>
  <div id='new' class='state'>
    <h6 style="color:f17">new</h6>
  </div>
</div>
</body>
